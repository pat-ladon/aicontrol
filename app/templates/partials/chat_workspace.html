<!-- START: templates/partials/chat_workspace.html -->

<!-- Chat History Area (scrollable) -->
<div id="chat-history" class="flex-1 p-4 overflow-y-auto">
  <!-- Welcome Message -->
  <div
    class="p-3 my-2 bg-white dark:bg-secondary-850 rounded-lg border border-secondary-200 dark:border-secondary-700"
  >
    <p class="font-semibold text-sm text-black dark:text-white">
      Control assistant
    </p>
    <div class="prose prose-sm dark:prose-invert max-w-none">
      <p>
        Welcome! I'm your control assistant. How can I help you today? You can
        ask me about best practices, risk mitigation, control design, or audit
        preparation.
      </p>
      <p>
        To work on a specific control, just select it from the list on the left.
      </p>
    </div>
  </div>
</div>

<!-- Chat Input Form Area (fixed at the bottom of this pane) -->
<div
  class="p-4 border-t border-secondary-200 dark:border-secondary-700 bg-white dark:bg-secondary-800"
>
  <form
    id="chat-form"
    hx-post="/ai/chat"
    hx-target="#chat-history"
    hx-swap="beforeend"
    hx-indicator="#chat-spinner"
    _="on htmx:afterOnLoad me.reset()"
  >
    <div class="flex items-center space-x-3">
      <textarea
        name="user_message"
        class="flex-1 p-3 rounded-none border-gray-300 dark:border-gray-600 bg-secondary-50 dark:bg-secondary-700 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"
        rows="1"
        placeholder="Ask a question about GRC..."
      ></textarea>
      <button
        type="submit"
        class="text-sm font-medium rounded-none px-4 py-2 border transition-colors bg-secondary-200 border-secondary-300 text-black hover:bg-primary-500 hover:border-primary-500 hover:text-white active:bg-primary-600 active:border-primary-600 dark:bg-secondary-700 dark:border-secondary-600 dark:text-secondary-200 dark:hover:bg-secondary-200 dark:hover:border-secondary-200 dark:hover:text-neutral-900 dark:active:bg-primary-600 dark:active:border-primary-600"
      >
        Send
      </button>
    </div>
    <div id="chat-spinner" class="htmx-indicator text-xs mt-2">
      Asking control assistant...
    </div>
  </form>
</div>

<!-- END: templates/partials/chat_workspace.html -->
<!-- NOTE: I have truncated long class lists for brevity -->
